(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-071ac97c"],{"1b67":function(t,e,s){},"7cde":function(t){t.exports=JSON.parse('{"a":["Solicitar documento frente e verso","Solicitar foto legível do documento","Anexar documento correto do cliente","Refazer formalização","Solicitar documento de RG, CNH ou Carteira de trabalho","Solicitar foto do documento original. Não aceitamos foto de tela ou print","Solicitar verso do documento","Solicitar frente do documento","Documento deteriorado. Favor solicitar documento legível","Documento divergente dos dados cadastrado no sistema","Foto do documento cortada","Selfie ilegível/refazer selfie","Anexar documento mais recente","Não aceitamos carteira de trabalho manuscrita/ Documentos válidos RG, CNH, RNE, Carteira de Trabalho impressa","Anexar selfie sem adereços (boné, óculos)","Não aceitamos xerox/cópia"]}')},ad88:function(t,e,s){"use strict";s("1b67")},e6a1:function(t,e,s){"use strict";class a{constructor(t){this.id=-1,this.nativePointer=t,this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY,self.Touch&&t instanceof Touch?this.id=t.identifier:i(t)&&(this.id=t.pointerId)}getCoalesced(){if("getCoalescedEvents"in this.nativePointer){const t=this.nativePointer.getCoalescedEvents().map(t=>new a(t));if(t.length>0)return t}return[this]}}const i=t=>"pointerId"in t,o=t=>"changedTouches"in t,n=()=>{};class r{constructor(t,{start:e=(()=>!0),move:s=n,end:r=n,rawUpdates:l=!1,avoidPointerEvents:c=!1}={}){this._element=t,this.startPointers=[],this.currentPointers=[],this._excludeFromButtonsCheck=new Set,this._pointerStart=t=>{if(i(t)&&0===t.buttons)this._excludeFromButtonsCheck.add(t.pointerId);else if(!(1&t.buttons))return;const e=new a(t);if(!this.currentPointers.some(t=>t.id===e.id)&&this._triggerPointerStart(e,t))if(i(t)){const e=t.target&&"setPointerCapture"in t.target?t.target:this._element;e.setPointerCapture(t.pointerId),this._element.addEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.addEventListener("pointerup",this._pointerEnd),this._element.addEventListener("pointercancel",this._pointerEnd)}else window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._pointerEnd)},this._touchStart=t=>{for(const e of Array.from(t.changedTouches))this._triggerPointerStart(new a(e),t)},this._move=t=>{if(!o(t)&&(!i(t)||!this._excludeFromButtonsCheck.has(t.pointerId))&&0===t.buttons)return void this._pointerEnd(t);const e=this.currentPointers.slice(),s=o(t)?Array.from(t.changedTouches).map(t=>new a(t)):[new a(t)],n=[];for(const a of s){const t=this.currentPointers.findIndex(t=>t.id===a.id);-1!==t&&(n.push(a),this.currentPointers[t]=a)}0!==n.length&&this._moveCallback(e,n,t)},this._triggerPointerEnd=(t,e)=>{if(!o(e)&&1&e.buttons)return!1;const s=this.currentPointers.findIndex(e=>e.id===t.id);if(-1===s)return!1;this.currentPointers.splice(s,1),this.startPointers.splice(s,1),this._excludeFromButtonsCheck.delete(t.id);const a=!("mouseup"===e.type||"touchend"===e.type||"pointerup"===e.type);return this._endCallback(t,e,a),!0},this._pointerEnd=t=>{if(this._triggerPointerEnd(new a(t),t))if(i(t)){if(this.currentPointers.length)return;this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd)}else window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)},this._touchEnd=t=>{for(const e of Array.from(t.changedTouches))this._triggerPointerEnd(new a(e),t)},this._startCallback=e,this._moveCallback=s,this._endCallback=r,this._rawUpdates=l&&"onpointerrawupdate"in window,self.PointerEvent&&!c?this._element.addEventListener("pointerdown",this._pointerStart):(this._element.addEventListener("mousedown",this._pointerStart),this._element.addEventListener("touchstart",this._touchStart),this._element.addEventListener("touchmove",this._move),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd))}stop(){this._element.removeEventListener("pointerdown",this._pointerStart),this._element.removeEventListener("mousedown",this._pointerStart),this._element.removeEventListener("touchstart",this._touchStart),this._element.removeEventListener("touchmove",this._move),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}_triggerPointerStart(t,e){return!!this._startCallback(t,e)&&(this.currentPointers.push(t),this.startPointers.push(t),!0)}}function l(t,e){void 0===e&&(e={});var s=e.insertAt;if(t&&"undefined"!==typeof document){var a=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===s&&a.firstChild?a.insertBefore(i,a.firstChild):a.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var c="pinch-zoom {\n  display: block;\n  overflow: hidden;\n  touch-action: none;\n  --scale: 1;\n  --x: 0;\n  --y: 0;\n}\n\npinch-zoom > * {\n  transform: translate(var(--x), var(--y)) scale(var(--scale));\n  transform-origin: 0 0;\n  will-change: transform;\n}\n";l(c);const d="min-scale";function u(t,e){return e?Math.sqrt((e.clientX-t.clientX)**2+(e.clientY-t.clientY)**2):0}function h(t,e){return e?{clientX:(t.clientX+e.clientX)/2,clientY:(t.clientY+e.clientY)/2}:t}function p(t,e){return"number"===typeof t?t:t.trimRight().endsWith("%")?e*parseFloat(t)/100:parseFloat(t)}let m;function v(){return m||(m=document.createElementNS("http://www.w3.org/2000/svg","svg"))}function f(){return v().createSVGMatrix()}function g(){return v().createSVGPoint()}const _=.01;class b extends HTMLElement{constructor(){super(),this._transform=f(),new MutationObserver(()=>this._stageElChange()).observe(this,{childList:!0});const t=new r(this,{start:(e,s)=>!(2===t.currentPointers.length||!this._positioningEl)&&(s.preventDefault(),!0),move:e=>{this._onPointerMove(e,t.currentPointers)}});this.addEventListener("wheel",t=>this._onWheel(t))}static get observedAttributes(){return[d]}attributeChangedCallback(t,e,s){t===d&&this.scale<this.minScale&&this.setTransform({scale:this.minScale})}get minScale(){const t=this.getAttribute(d);if(!t)return _;const e=parseFloat(t);return Number.isFinite(e)?Math.max(_,e):_}set minScale(t){this.setAttribute(d,String(t))}connectedCallback(){this._stageElChange()}get x(){return this._transform.e}get y(){return this._transform.f}get scale(){return this._transform.a}scaleTo(t,e={}){let{originX:s=0,originY:a=0}=e;const{relativeTo:i="content",allowChangeEvent:o=!1}=e,n="content"===i?this._positioningEl:this;if(!n||!this._positioningEl)return void this.setTransform({scale:t,allowChangeEvent:o});const r=n.getBoundingClientRect();if(s=p(s,r.width),a=p(a,r.height),"content"===i)s+=this.x,a+=this.y;else{const t=this._positioningEl.getBoundingClientRect();s-=t.left,a-=t.top}this._applyChange({allowChangeEvent:o,originX:s,originY:a,scaleDiff:t/this.scale})}setTransform(t={}){const{scale:e=this.scale,allowChangeEvent:s=!1}=t;let{x:a=this.x,y:i=this.y}=t;if(!this._positioningEl)return void this._updateTransform(e,a,i,s);const o=this.getBoundingClientRect(),n=this._positioningEl.getBoundingClientRect();if(!o.width||!o.height)return void this._updateTransform(e,a,i,s);let r=g();r.x=n.left-o.left,r.y=n.top-o.top;let l=g();l.x=n.width+r.x,l.y=n.height+r.y;const c=f().translate(a,i).scale(e).multiply(this._transform.inverse());r=r.matrixTransform(c),l=l.matrixTransform(c),r.x>o.width?a+=o.width-r.x:l.x<0&&(a+=-l.x),r.y>o.height?i+=o.height-r.y:l.y<0&&(i+=-l.y),this._updateTransform(e,a,i,s)}_updateTransform(t,e,s,a){if(!(t<this.minScale)&&(t!==this.scale||e!==this.x||s!==this.y)&&(this._transform.e=e,this._transform.f=s,this._transform.d=this._transform.a=t,this.style.setProperty("--x",this.x+"px"),this.style.setProperty("--y",this.y+"px"),this.style.setProperty("--scale",this.scale+""),a)){const t=new Event("change",{bubbles:!0});this.dispatchEvent(t)}}_stageElChange(){this._positioningEl=void 0,0!==this.children.length&&(this._positioningEl=this.children[0],this.children.length>1&&console.warn("<pinch-zoom> must not have more than one child."),this.setTransform({allowChangeEvent:!0}))}_onWheel(t){if(!this._positioningEl)return;t.preventDefault();const e=this._positioningEl.getBoundingClientRect();let{deltaY:s}=t;const{ctrlKey:a,deltaMode:i}=t;1===i&&(s*=15);const o=a?100:300,n=1-s/o;this._applyChange({scaleDiff:n,originX:t.clientX-e.left,originY:t.clientY-e.top,allowChangeEvent:!0})}_onPointerMove(t,e){if(!this._positioningEl)return;const s=this._positioningEl.getBoundingClientRect(),a=h(t[0],t[1]),i=h(e[0],e[1]),o=a.clientX-s.left,n=a.clientY-s.top,r=u(t[0],t[1]),l=u(e[0],e[1]),c=r?l/r:1;this._applyChange({originX:o,originY:n,scaleDiff:c,panX:i.clientX-a.clientX,panY:i.clientY-a.clientY,allowChangeEvent:!0})}_applyChange(t={}){const{panX:e=0,panY:s=0,originX:a=0,originY:i=0,scaleDiff:o=1,allowChangeEvent:n=!1}=t,r=f().translate(e,s).translate(a,i).translate(this.x,this.y).scale(o).translate(-a,-i).scale(this.scale);this.setTransform({allowChangeEvent:n,scale:r.a,x:r.e,y:r.f})}}customElements.define("pinch-zoom",b)},f411:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("base-modal",{staticClass:"antifraud",attrs:{"message-error":t.message.error,"button-two-text":"Reprovar","button-one-text":"Aprovar","show-buttons":t.showActions},on:{close:t.close,"button-2":function(e){return t.approve(!1)},"button-1":function(e){return t.approve(!0)}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Antifraude :: Corban ")]},proxy:!0},{key:"body",fn:function(){return[e("h3",{staticClass:"title"},[t._v(" Link de formalização ")]),e("div",{staticClass:"grid--3"},[e("a",{staticClass:"antifraud__link button is-ghost",attrs:{href:t.validationLink,target:"_blank"}},[e("span",[t._v("Redirecionar")]),e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-external-link-alt"})])]),e("a",{staticClass:"antifraud__link button is-ghost",on:{click:t.copy}},[e("span",[t._v("Copiar link")]),e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-copy"})]),e("input",{ref:"validation-link",attrs:{type:"hidden"},domProps:{value:t.validationLink}})]),e("button",{staticClass:"antifraud__link button is-ghost",on:{click:t.genQRCode}},[e("span",[t._v("Gerar QR Code")]),e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-qrcode"})])])]),e("div",{staticClass:"qrcode p-3 mt-3",class:{active:t.showQRCode}},[e("canvas",{ref:"qrcode",staticClass:"qrcode__canvas"}),e("button",{staticClass:"button is-link is-small has-border",on:{click:t.saveQRCode}},[e("span",[t._v("Salvar imagem")]),e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-download"})])]),e("button",{staticClass:"button is-ghost is-small",on:{click:t.closeQRCode}},[e("span",[t._v("Fechar")]),e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-timex"})])])]),e("hr"),""===t.message.error||Object.keys(t.info).length?[e("dl",[t.receipt?[e("dt",{staticClass:"title"},[e("span",[t._v("Receita Federal")]),e("label",{staticClass:"toggle ml-auto",on:{click:function(e){t.collapsed.doc=!t.collapsed.doc}}},[e("span",[t._v(t._s(t.toggleLabel.doc))]),e("i",{staticClass:"fas fa-chevron-left",class:{"is--collapsed":!t.collapsed.doc}})])]),e("dd",{class:{collapsed:!t.collapsed.doc}},[e("table",{staticClass:"table is-hoverable is-striped is-fullwidth receipt"},[e("thead",[e("tr",[e("th"),e("th",[t._v("Informado na Proposta")]),e("th",[t._v("Base da Receita")]),e("th",[t._v("Match")])])]),e("tbody",[e("tr",[e("th",[t._v("Nome")]),e("td",[t._v(t._s(t.nameUpperCase))]),e("td",[t._v(t._s(t.receipt.name))]),e("td",{staticClass:"is-narrow"},[e("span",{staticClass:"tag is-medium",class:[t.isEqual(t.info.name,t.receipt.name)?"is-success":"is-danger"],staticStyle:{width:"100%"}},[e("i",{staticClass:"fas",class:[t.isEqual(t.info.name,t.receipt.name)?"fa-smile":"fa-dizzy"]})])])]),e("tr",[e("th",[t._v("Data Nasc.")]),e("td",[t._v(t._s(t.info.birthdate))]),e("td",[t._v(t._s(t.receipt.birthdate))]),e("td",{staticClass:"is-narrow"},[e("span",{staticClass:"tag is-medium",class:[t.isEqual(t.info.birthdate,t.receipt.birthdate)?"is-success":"is-danger"],staticStyle:{width:"100%"}},[e("i",{staticClass:"fas",class:[t.isEqual(t.info.birthdate,t.receipt.birthdate)?"fa-smile":"fa-dizzy"]})])])])]),e("tfoot",[e("tr",[e("th",[t._v("Documento")]),e("td",{attrs:{colspan:"3"}},[t._v(" "+t._s(t.info.document)+" ")])]),e("tr",[e("th",[t._v("Situação")]),e("td",{staticClass:"is-uppercase",class:(t.receipt.base_status||"").toLowerCase().includes("pendente")?"has-text-warning-dark":"has-text-success",attrs:{colspan:(t.receipt.base_status||"").toLowerCase().includes("pendente")?2:3}},[t._v(" "+t._s(t.receipt.base_status)+" ")])])])])])]:t._e(),e("dt",{staticClass:"title"},[e("span",[t._v("Biometria / Documentoscopia")]),e("label",{staticClass:"toggle ml-auto",on:{click:function(e){t.collapsed.compare=!t.collapsed.compare}}},[e("span",[t._v(t._s(t.toggleLabel.compare))]),e("i",{staticClass:"fas fa-chevron-left",class:{"is--collapsed":!t.collapsed.compare}})])]),e("dd",{class:{collapsed:!t.collapsed.compare}},[t.isUnicoSDK?[e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("p",[t._v(" "+t._s(t.score_description)+" ")])]),e("div",{staticClass:"biometryActions column is-narrow"},[e("span",{staticClass:"tag is-large",class:[t.score<0||void 0===t.score?"is-danger":t.score<50?"is-warning":"is-success",!t.score&&"is-clickable"],on:{click:function(e){return t.scoreNull()}}},[e("span",{staticClass:"mr-2"},[t._v(t._s(t.showScore(t.score)))]),e("i",{staticClass:"fas",class:[t.score<0||void 0===t.score?"fa-dizzy":t.score<50?"fa-meh-blank":"fa-laugh-beam"]})])])]),t.score&&t.showActions?e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("hr",{staticClass:"mt-0"}),e("p",[t._v(" Você pode atualizar o status desta proposta com os novos passos à se seguir. ")]),e("base-select",{attrs:{options:t.list.operations,placeholder:"Selecione um status","can-filter":""},model:{value:t.form.operation,callback:function(e){t.$set(t.form,"operation",e)},expression:"form.operation"}}),e("button",{staticClass:"button is-link",attrs:{disabled:!t.form.operation,title:t.form.operation?"Atualizar status":"Selecione um status primeiro"},on:{click:function(e){return e.preventDefault(),t.scoreNull(t.form.operation)}}},[e("span",[t._v("Atualizar status")])])],1)]):t._e()]:[e("div",{staticClass:"grid"},[t._l(t.docsTabs[t.tab.current].arr,(function({label:s,grid:a,value:i},o){return[e("base-input",{key:o,staticClass:"antifraud__input",class:a,attrs:{value:i,type:"text",disabled:""}},[t._v(" "+t._s(s)+" ")])]}))],2)],e("h4",{staticClass:"title mt-5"},[e("span",[t._v(t._s(t.dragTitle))]),t.selectedItem[0]&&t.selectedItem[0].src?e("small",{staticClass:"ml-3 has-text-grey-light lowercase"},[e("i",[t._v("(para dar zoom, use o scroll do mouse)")])]):t._e(),e("base-switch",{staticClass:"ml-auto",model:{value:t.form.compare,callback:function(e){t.$set(t.form,"compare",e)},expression:"form.compare"}},[e("span",{staticClass:"capitalize"},[t._v("Comparar")])])],1),e("ul",{staticClass:"antifraud__list"},t._l(t.avaliableImages,(function(s,a){return e("base-drag-item",t._b({key:a},"base-drag-item",{tag:"li",dataTransfer:{src:s}},!1),[e("img",{attrs:{src:s,alt:"img-"+a}})])})),1),e("ul",{staticClass:"antifraud__viewer",class:{comparing:t.form.compare}},t._l(t.dropAreas,(function(s,a){return e("base-drop-item",t._b({key:a,staticClass:"antifraud__drop__target",class:t.dragClasses(a),attrs:{"data-id":a}},"base-drop-item",{tag:"li","data-id":a,over:t.over,leave:t.leave,drop:t.drop},!1),[t.hasSelectedItem(a)?e("div",{staticClass:"antifraud__drop__img"},[e("button",{staticClass:"button is-ghost antifraud__drop__btn redo",on:{click:function(e){return t.rotate(a)}}},[e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-undo"})])]),e("button",{staticClass:"button is-ghost antifraud__drop__btn close",on:{click:function(e){return t.removeSelectedItem(a)}}},[e("span",{staticClass:"icon"},[e("i",{staticClass:"far fa-times-circle"})])]),e("pinch-zoom",{ref:"zoom",refInFor:!0,staticClass:"antifraud__drop__zoom",attrs:{id:"pinch-zoom-"+a}},[e("img",{attrs:{"data-index":a,src:t.selectedItem[a].src,alt:"img-"+a},on:{load:t.align}})])],1):e("span",{staticClass:"antifraud__drop__empty"},[t._v(t._s(t.dragMessage[a]))])])})),1)],2),e("dt",{staticClass:"title"},[e("span",[t._v("Geolocalização")]),e("label",{staticClass:"toggle ml-auto",on:{click:function(e){t.collapsed.map=!t.collapsed.map}}},[e("span",[t._v(t._s(t.toggleLabel.map))]),e("i",{staticClass:"fas fa-chevron-left",class:{"is--collapsed":!t.collapsed.map}})])]),e("dd",{class:{collapsed:!t.collapsed.map}},[t.showLocation?[e("div",{staticClass:"grid"},[t._l(t.address,(function({label:s,grid:a,value:i},o){return[e("base-input",{key:o,staticClass:"antifraud__input",class:a,attrs:{value:i||"---",type:"text",disabled:""}},[t._v(" "+t._s(s)+" ")])]}))],2)]:t._e(),e("div",[e("label",{staticClass:"label mb-3"},[t._v("Visualizar mapa")])]),e("a",{staticClass:"antifraud__link button is-ghost",attrs:{href:t.mapsLink,target:"_blank"}},[t._v("Abrir no Google Maps")])],2),e("dt",{staticClass:"title"},[e("span",[t._v("Histórico")]),e("label",{staticClass:"toggle ml-auto",on:{click:function(e){t.collapsed.historic=!t.collapsed.historic}}},[e("span",[t._v(t._s(t.toggleLabel.historic))]),e("i",{staticClass:"fas fa-chevron-left",class:{"is--collapsed":!t.collapsed.historic}})])]),e("dd",{class:{collapsed:!t.collapsed.historic}},[t.hasHistoric?e("div",{staticClass:"historic__container"},[e("div",{staticClass:"historic__list"},t._l(t.historic,(function({created_at:s,description:a},i){return e("div",{key:i,staticClass:"historic__item"},[e("p",[t._v(t._s(t.dateFormat(s)))]),e("p",[t._v(t._s(a))])])})),0)]):t._e()])],2),[e("h3",{staticClass:"title mt-5"},[t._v(" Status ")]),e("div",{staticClass:"antifraud__status"},[e("p",{class:t.status.class},[t._v(" "+t._s(t.status.message)+" ")])])]]:t._e(),""===t.message.error||Object.keys(t.info).length?t._e():[e("h3",{staticClass:"title"},[t._v(" Alerta ")]),e("div",{staticClass:"pb-5"},[t._v(" Sem dados até o momento ")])]]},proxy:!0}])})},i=[],o=(s("13d5"),s("14d9"),s("2f62")),n=s("4b44"),r=s("d055"),l=s.n(r),c=s("2ef0"),d=s.n(c),u=(s("e6a1"),s("b686")),h=s("4d0a"),p=s("ed08"),m=s("c1ec"),v=s("2a98"),f=s("436a"),g=s("7cde"),_={name:"ModalAntiFraudCorban",components:{BaseModal:m["default"],BaseSwitch:()=>Promise.resolve().then(s.bind(null,"f83b")),BaseDragItem:()=>s.e("chunk-2d21a396").then(s.bind(null,"bb33")),BaseDropItem:()=>s.e("chunk-7719e2ad").then(s.bind(null,"d2bb1")),BaseSelect:()=>Promise.resolve().then(s.bind(null,"2a26")),BaseInput:()=>Promise.resolve().then(s.bind(null,"b3b3"))},mixins:[u["a"],h["a"]],inject:["domain"],props:{data:{type:Object,required:!0}},data:()=>({message:{error:"",approved:""},form:{approved:null,compare:!1,operation:null},collapsed:{doc:!0,map:!1,compare:!1,historic:!1},list:{collapsed:{true:"Ocultar",false:"Exibir"},status:{true:{message:"Aprovado",class:"has-text-success has-background-success-light"},false:{message:"Reprovado",class:"has-text-danger has-background-danger-light"},null:{message:"Aguardando verificação",class:"has-text-grey-light"}},operations:g["a"].map(t=>({value:t,name:t}))},tab:{current:0},info:{},selectedItem:{},activeDrop:{},img:{},showLocation:!1,showQRCode:!1,showActions:!1,permittedRoles:[1,6,8,11,14]}),computed:{...Object(o["d"])({token:t=>t.app.logonToken,user:t=>t.user.userInfo}),...Object(o["c"])({isMobile:"app/isMobile"}),isUnicoSDK(){return this.info.details&&this.info.details.unico},score(){var t,e,s;const{score:a}=null!==(t=null===(e=this.info)||void 0===e||null===(s=e.details)||void 0===s?void 0:s.unico)&&void 0!==t?t:{};return a},score_description(){var t,e,s;const{score_description:a}=null!==(t=null===(e=this.info)||void 0===e||null===(s=e.details)||void 0===s?void 0:s.unico)&&void 0!==t?t:{};return a},images(){var t,e,s;const a=[(null===(t=this.info)||void 0===t?void 0:t.file_document_1)||null,(null===(e=this.info)||void 0===e?void 0:e.file_document_2)||null,(null===(s=this.info)||void 0===s?void 0:s.file_selfie)||null];return a.filter(t=>t)},address(){const{zipcode:t,street:e,number:s,complement:a,neighborhood:i,city:o,state:n}=this.info;return[{label:"Logradouro",grid:"full",value:e},{label:"Número",value:s},{label:"Complemento",value:a},{label:"Bairro",value:i},{label:"CEP",value:t},{label:"Cidade",value:o},{label:"Estado",value:n}]},docs(){const{details:t}=this.info;if(void 0===t)return{};const{checkDocument_A:e,checkDocument_B:s,checkDocument_C:a,faceMatch:i,backgroundcheck:o}=t;return{side_a:e,side_b:s,side_c:a,match:i,check:o}},sides(){const t=["a","b","c"],e=t.reduce((t,e)=>{const s="side_"+e,a=this.docs[s];return void 0!==a&&t.push(this[`get${a.DocInfo.DOCTYPE}Data`](a)),t},[]);return e.reduce((t,e)=>(e&&t.push(e.filter(({value:t})=>t)),t),[]).flat()},match(){const{match:t}=this.docs;if(void 0===t)return[];const{EstimatedInfo:e}=t;return[{label:"Similaridade",grid:"full",value:e.Similarity},{label:"Mensagem",grid:"full",value:t.ResultMessage}]},check(){const{check:t}=this.docs;return void 0===t?[]:[{label:"Mensagem",grid:"full",value:t.ResultMessage},{label:"Score / Limite",grid:"full",value:`${t.Score} / ${t.LimitScore}`}]},docsTabs(){return[{title:"Documento",arr:this.sides},{title:"Match",arr:this.match},{title:"Check",arr:this.check}]},avaliableImages(){const t=Object.values(this.selectedItem).map(({src:t})=>t);return this.images.filter(e=>!t.includes(e))},dragTitle(){const t=this.form.compare?"Comparar":"Verificar";return t+" imagens"},dragMessage(){return Object.keys(this.activeDrop).map(t=>this.activeDrop[t]?"solte a imagem aqui":"arraste e solte uma imagem aqui")},dropAreas(){const t={title:"img"};return this.form.compare?[t,t]:[t]},status(){return this.list.status[this.form.approved]},mapsLink(){var t,e,s,a;const i=(null===(t=this.info)||void 0===t||null===(e=t.location)||void 0===e?void 0:e.longitude)||"",o=(null===(s=this.info)||void 0===s||null===(a=s.location)||void 0===a?void 0:a.latitude)||"";return`https://www.google.com/maps/search/?api=1&query=${o},${i}`},validationLink(){return Object(p["g"])(this.data.token,"corban")},toggleLabel(){const t=Object.keys(this.collapsed),e=t.reduce((t,e)=>(t[e]=this.list.collapsed[this.collapsed[e]],t),{});return e},hasHistoric(){const{historic:t}=this;return t&&t[0]},historic(){const{history:t}=this.info;return t},receipt(){var t,e;const s=(null===(t=this.info)||void 0===t||null===(e=t.details)||void 0===e?void 0:e.receita)||{};return s},nameUpperCase(){var t;return((null===(t=this.info)||void 0===t?void 0:t.name)||"").toUpperCase()}},watch:{dropAreas:{handler(t){for(const e of Object.keys(this.selectedItem))this.$delete(this.selectedItem,e),this.$delete(this.activeDrop,e);for(const e of Object.keys(t))this.$set(this.selectedItem,e,{src:""}),this.$set(this.activeDrop,e,!1)},deep:!0}},async mounted(){await this.getAntifraudData(),this.enableAction(),this.$set(this.activeDrop,"0",!1)},methods:{over(t){const e=t.target.closest(".antifraud__drop__target"),s=e.dataset.id;this.activeDrop[s]=!0},leave(t,e=null){let s,a=e;t&&(s=t.target.closest(".antifraud__drop__target"),a=s.dataset.id),this.activeDrop[a]=!1},drop(t){const e=t.dataTransfer.getData("value"),s=t.target.closest(".antifraud__drop__target"),a=s.dataset.id;this.$set(this.selectedItem,a,JSON.parse(e)),this.leave(null,a)},align({target:t}){if(t){const{index:e}=t.dataset,{clientWidth:s}=t,{clientWidth:a}=t.parentElement,i=t.parentElement,o=a/2-s/2;this.$set(this.img,e,{rotate:0}),i.setTransform({scale:1,x:o,y:0}),i.style.setProperty("--rotate",this.img[e].rotate+"deg")}},rotate(t){const e=document.getElementById("pinch-zoom-"+t);let s=this.img[t].rotate-90;-360===s&&(s=0),this.img[t].rotate=s,e.style.setProperty("--rotate",this.img[t].rotate+"deg")},removeSelectedItem(t){this.$delete(this.selectedItem,t)},hasSelectedItem(t){return!!this.selectedItem[t]&&!!this.selectedItem[t].src},dragClasses(t){return{hover:this.activeDrop[t],dropped:this.hasSelectedItem(t)}},genQRCode(){const t=this.$refs.qrcode,e=this.validationLink,s=this;l.a.toCanvas(t,e,t=>{s.showQRCode=!0,t&&(s.showQRCode=!1)})},saveQRCode(){const t=this.$refs.qrcode,e=t.toDataURL("image/png",1).replace("image/png","image/octet-stream"),s=document.createElement("a");s.href=e,s.setAttribute("download","qrcode-validation-link.png"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},closeQRCode(){this.showQRCode=!1},getCNHData(t){const{DocInfo:e}=t;return[{label:"Documento",value:e.DOCTYPE},{label:"Nome",value:e.NAME},{label:"Data de nascimento",value:e.BIRTHDATE},{label:"Órgão emissor",value:e.ORGEMISSION},{label:"Estado de expedição",value:e.IDENTIFICATIONUF},{label:"Nome da mãe",value:e.MOTHERNAME},{label:"Nome do pai",value:e.FATHERNAME},{label:"Número de identificação",value:e.IDENTIFICATIONNUMBER},{label:"Data de expedição",value:e.EXPEDITIONDATE},{label:"Primeira qualificação",value:e.FIRSTQUALIFICATIONDATE},{label:"Atividade remunerada",value:e.PAIDACTIVITY},{label:"Local de emissão",value:e.PLACEOFEMISSION},{label:"Validade",value:e.VALIDDATE},{label:"Observações",value:e.OBSERVATIONS}]},getData(t){const{DocInfo:e}=t;return{DOCTYPE:{label:"Documento",value:e.DOCTYPE},NAME:{label:"Nome",value:e.NAME},BIRTHDATE:{label:"Data de nascimento",value:e.BIRTHDATE},ORGEMISSION:{label:"Órgão emissor",value:e.ORGEMISSION},IDENTIFICATIONUF:{label:"Estado de expedição",value:e.IDENTIFICATIONUF},DOCEMISSIONPLACE:{label:"Local emissor",value:e.DOCEMISSIONPLACE},MOTHERNAME:{label:"Nome da mãe",value:e.MOTHERNAME},FATHERNAME:{label:"Nome do pai",value:e.FATHERNAME},PLACEOFBIRTH:{label:"Naturalidade",value:e.PLACEOFBIRTH},IDENTIFICATIONNUMBER:{label:"Número de identificação",value:e.IDENTIFICATIONNUMBER},"NIS/PIS/PASEP":{label:"NIS/PIS/PASEP",value:e["NIS/PIS/PASEP"]},EXPEDITIONDATE:{label:"Data de expedição",value:e.EXPEDITIONDATE},CPF:{label:"CPF",value:e.CPF},CTPS:{label:"CTPS",value:e.CTPS},MILITARYCERTIFICATE:{label:"Cert. Militar",value:e.MILITARYCERTIFICATE},SERIES:{label:"Série",value:e.SERIES}}},getRGData(t){const e=this.getData(t);return[Object.assign(e.DOCTYPE,{grid:"full"}),Object.assign(e.NAME,{grid:"full"}),Object.assign(e.BIRTHDATE,{grid:"full"}),Object.assign(e.DOCEMISSIONPLACE,{grid:"full"}),e.CPF,e.IDENTIFICATIONNUMBER,e.MOTHERNAME,e.FATHERNAME,e.EXPEDITIONDATE,e.IDENTIFICATIONUF,Object.assign(e.PLACEOFBIRTH,{grid:"full"})]},getNEWRGData(t){const e=this.getData(t);return[Object.assign(e.DOCTYPE,{grid:"full"}),Object.assign(e.NAME,{grid:"full"}),e.BIRTHDATE,e.MOTHERNAME,e.FATHERNAME,e.CPF,e.IDENTIFICATIONNUMBER,e["NIS/PIS/PASEP"],e.EXPEDITIONDATE,e.ORGEMISSION,e.IDENTIFICATIONUF,e.DOCEMISSIONPLACE,Object.assign(e.PLACEOFBIRTH,{grid:"full"}),e.CTPS,e.MILITARYCERTIFICATE,Object.assign(e.SERIES,{grid:"full"})]},showScore(t){return t?"Score "+t:"Falha ao Analisar"},async getAntifraudData(){const t=new f["a"](this.token),e={account_id:this.data.account_id};this.loading=!0,await t.getImagesCorban(e).then(({data:t})=>{this.setData(t),null!==t.approved&&(this.form.approved=!!t.approved),this.message.error=""}).catch(t=>this.handlerError(t)).finally(()=>{this.loading=!1})},async approve(t){const e=new f["a"](this.token),s={proposal_id:this.data.proposal_id,account_id:this.data.account_id,approved:t||""+t};this.loading=!0,await e.resolution(s).then(({data:t})=>{this.form.approved="string"!==typeof t.approved}).catch(t=>this.handlerError(t)).finally(()=>{this.loading=!1})},setData(t,e="info"){const s="info"===e?this.info:e;for(const a of Object.keys(t))this.$set(s,a,t[a])},handlerError(t,e="error"){var s,a,i,o,n,r,l,c,d,u,h,p;let m=(null===t||void 0===t||null===(s=t.response)||void 0===s||null===(a=s.data)||void 0===a||null===(i=a.error)||void 0===i?void 0:i.message)||(null===t||void 0===t||null===(o=t.error)||void 0===o||null===(n=o.response)||void 0===n||null===(r=n.data)||void 0===r||null===(l=r.error)||void 0===l?void 0:l.message)||(null===t||void 0===t||null===(c=t.error)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.message)||(null===t||void 0===t?void 0:t.message)||t;if(null!==t&&void 0!==t&&null!==(u=t.response)&&void 0!==u&&null!==(h=u.data)&&void 0!==h&&null!==(p=h.error)&&void 0!==p&&p.errors){var v,f,g;const e=Object.values(null===t||void 0===t||null===(v=t.response)||void 0===v||null===(f=v.data)||void 0===f||null===(g=f.error)||void 0===g?void 0:g.errors);m=m.concat("<br> - "+e.map(t=>t).join("<br> - "))}this.$set(this.message,e,m)},isEqual(t,e){const s=t=>String(t).trim().toLowerCase();return d.a.isEqual(s(t||""),s(e||""))},copy(){const t=this.$refs["validation-link"];t.setAttribute("type","text"),t.select();try{document.execCommand("copy"),Object(n["toast"])({message:"Link copiado!",type:"is-success",dismissible:!0,pauseOnHover:!0,animate:{in:"fadeIn",out:"fadeOut"},position:"top-center",closeOnClick:!0})}catch{}t.setAttribute("type","hidden"),window.getSelection().removeAllRanges()},maskValue(t){const e={style:"currency",currency:"BRL"};return parseFloat(t).toLocaleString("pt-BR",e)},close(){this.$emit("close")},dateFormat(t){if(!t)return"";const e={second:"2-digit",minute:"2-digit",hour:"2-digit",timeZone:"America/Sao_Paulo"},s=new Date(t).toLocaleDateString("pt-br",e);return s},enableAction(){for(const s of this.permittedRoles){var t,e;if((null!==(t=null===(e=this.user)||void 0===e?void 0:e.roles_ids)&&void 0!==t?t:[]).includes(s)){this.showActions=!0;break}}},async scoreNull(t){const e=new v["a"](this.token),s=t||"Favor solicitar ao cliente que refaça a selfie e aceite do contrato. Falha na análise da biometria facial.";!t&&this.score||(this.loading=!0,await e.updateAccounts(this.data.account_id,{responsible_id:this.data.responsible_id||this.user.id,proposal_id:this.data.proposal_id,obs:s}).catch(t=>this.handlerError(t)).finally(()=>{this.loading=!1,this.close()}))}}},b=_,C=(s("ad88"),s("2877")),E=Object(C["a"])(b,a,i,!1,null,"087de3dc",null);e["default"]=E.exports}}]);